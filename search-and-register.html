<!DOCTYPE html>
<html lang="fa" dir="rtl" data-bs-theme="light">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>استاویتا | جستجو و ثبت کالا</title>
  
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Custom Theme Files -->
  <link rel="stylesheet" href="theme-tokens.css">
  <link rel="stylesheet" href="bootstrap-theme.css">
  
  <!-- Persian Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700&display=swap" rel="stylesheet">
  
  <style>
    /* ========== LAYOUT STYLES ========== */
    .layout-container {
      display: flex;
      height: 100vh;
      overflow: hidden;
    }
    
    /* ========== SIDEBAR STYLES ========== */
    .sidebar {
      width: 360px;
      height: 100vh;
      background: var(--bg-elev);
      border-left: none;
      display: flex;
      flex-direction: column;
      position: fixed;
      right: 0;
      top: 0;
      z-index: 1000;
      overflow: hidden;
    }
    
    /* Sidebar Topbar */
    .sidebar-topbar {
      height: 72px;
      background: var(--bg-soft);
      border-bottom: 1px solid var(--border);
      padding: 0 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
    }
    
    .topbar-left {
      display: flex;
      align-items: center;
    }
    
    .topbar-spacer {
      flex: 1;
    }
    
    .topbar-icon {
      width: 40px;
      height: 40px;
      border: none;
      background: transparent;
      border-radius: var(--radius-sm);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition-normal);
      position: relative;
    }
    
    .topbar-icon:hover {
      background: rgba(5, 96, 253, 0.1);
    }
    
    .topbar-icon i {
      font-size: 20px;
      color: var(--text-base);
    }
    
    .topbar-badge {
      position: absolute;
      top: -2px;
      right: -2px;
      background: var(--danger);
      color: var(--text-inverse);
      font-size: 12px;
      font-weight: 700;
      padding: 2px 6px;
      border-radius: var(--radius-pill);
      min-width: 18px;
      height: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid var(--bg-elev);
    }
    
    .topbar-right {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .topbar-user-name {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-base);
      font-family: var(--font-family);
      margin: 0;
    }
    
    .topbar-avatar {
      width: 36px;
      height: 36px;
      background: var(--brand);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-glow-brand);
    }
    
    .topbar-avatar i {
      font-size: 18px;
      color: #FFFFFF;
    }
    
    /* Sidebar Menu */
    .sidebar-menu {
      flex: 1;
      padding: 24px;
      overflow-y: auto;
      overflow-x: hidden;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    
    .sidebar-menu::-webkit-scrollbar {
      display: none;
    }
    
    .menu-section {
      margin-bottom: 32px;
    }
    
    .menu-section-title {
      color: var(--text-muted);
      font-weight: 700;
      font-size: 20px;
      margin: 18px 12px 10px;
      font-family: var(--font-family);
    }
    
    .menu-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 14px;
      border-radius: var(--radius-md);
      color: var(--text-muted);
      font-weight: 700;
      font-size: 18px;
      font-family: var(--font-family);
      text-decoration: none;
      transition: var(--transition-normal);
      position: relative;
      margin-bottom: 4px;
      cursor: pointer;
    }
    
    .menu-item:hover {
      background: var(--bg-soft);
      transform: translateX(-2px);
      transition: all var(--transition-normal);
      text-decoration: none;
      color: var(--text-base);
    }
    
    .menu-item.active {
      background: var(--brand);
      color: #FFFFFF;
      box-shadow: var(--shadow-glow-brand);
      border-radius: var(--radius-md);
      transform: translateX(-2px);
    }
    
    .menu-item.active:hover {
      background: var(--brand);
      box-shadow: var(--shadow-glow-brand);
      transform: translateX(-2px);
      color: #FFFFFF;
    }
    
    .menu-item.active i {
      filter: brightness(0) invert(1);
    }
    
    .menu-item i {
      width: 20px;
      height: 20px;
      font-size: 20px;
      flex-shrink: 0;
    }
    
    .menu-item-label {
      flex: 1;
      font-size: 18px;
      font-weight: 700;
      font-family: var(--font-family);
    }
    
    /* ========== MAIN CONTENT AREA ========== */
    .main-content {
      flex: 1;
      margin-right: 360px;
      background: var(--bg-base);
      overflow: hidden;
      max-width: 1360px;
      padding: 0 24px;
    }
    
    /* ========== PAGE HEADER ========== */
    .page-header {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    
    .page-title {
      font-size: 24px;
      font-weight: 800;
      color: var(--text-base);
      font-family: var(--font-family);
      margin: 0;
    }
    
    .page-description {
      font-size: 14px;
      color: var(--text-muted);
      font-family: var(--font-family);
      margin: 0;
    }
    
    .content-wrapper {
      max-width: 1360px;
      padding: 24px;
      background: transparent;
      height: 100%;
      overflow-y: auto;
      overflow-x: hidden;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    
    .content-wrapper::-webkit-scrollbar {
      display: none;
    }
    
    /* ========== RESPONSIVE DESIGN ========== */
    @media (max-width: 1024px) {
      .sidebar {
        width: 320px;
      }
      
      .main-content {
        margin-right: 320px;
      }
    }
    
    @media (max-width: 768px) {
      .sidebar {
        width: 100%;
        transform: translateX(100%);
        transition: transform var(--transition-normal);
      }
      
      .sidebar.mobile-open {
        transform: translateX(0);
      }
      
      .main-content {
        margin-right: 0;
      }
      
      .mobile-menu-btn {
        display: block;
      }
    }
    
    @media (max-width: 640px) {
      .content-wrapper {
        padding: 16px;
      }
      
      .sidebar-topbar {
        padding: 0 16px;
      }
      
      .sidebar-menu {
        padding: 16px;
      }
      
      .topbar-user-name {
        font-size: 18px;
      }
      
      .topbar-avatar {
        width: 32px;
        height: 32px;
      }
      
      .topbar-avatar i {
        font-size: 16px;
      }
    }
    
    /* ========== MOBILE MENU BUTTON ========== */
    .mobile-menu-btn {
      display: none;
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1001;
      width: 40px;
      height: 40px;
      border: none;
      background: var(--brand);
      border-radius: var(--radius-sm);
      cursor: pointer;
      color: var(--text-inverse);
      font-size: 18px;
      transition: var(--transition-normal);
    }
    
    .mobile-menu-btn:hover {
      background: var(--brandGlow);
      box-shadow: var(--shadow-glow-brand);
    }
    
    /* ========== SEARCH CARD STYLES ========== */
    .search-card-container {
      position: relative;
    }
    
    .search-card-surface {
      background: var(--bg-elev);
      box-shadow: var(--shadow-card);
      border-radius: var(--radius-lg);
      padding: 30px;
      position: relative;
    }
    
    .search-card-heading {
      font-size: 20px;
      font-weight: 800;
      color: var(--text-base);
      text-align: center;
      margin-bottom: 24px;
      font-family: var(--font-family);
    }
    
    .search-card-description {
      font-size: 14px;
      color: var(--text-muted);
      text-align: center;
      margin-bottom: 48px;
      font-family: var(--font-family);
    }
    
    .search-input-container {
      position: relative;
      margin-bottom: 32px;
    }
    
    .search-input {
      width: 100%;
      height: 52px;
      border: 1px solid transparent;
      outline: none;
      background: var(--bg-soft);
      border-radius: var(--radius-md);
      padding: 0 16px 0 45px;
      font-size: 14px;
      font-family: var(--font-family);
      color: var(--text-base);
      box-shadow: var(--shadow-glow-brand);
      transition: var(--transition-normal);
      margin-bottom: 10px;
    }
    
    .search-input:focus {
      box-shadow: var(--shadow-glow-brand);
      background: var(--bg-soft);
    }
    
    .search-input::placeholder {
      color: var(--text-muted);
    }
    
    .search-input-icon {
      position: absolute;
      right: 16px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 16px;
      color: var(--text-muted);
      pointer-events: none;
    }
    
    .search-card-divider {
      height: 1px;
      background: var(--text-muted);
      opacity: 0.4;
      margin: 0 0 10px 0;
    }
    
    .search-card-sub-description {
      font-size: 14px;
      color: var(--text-muted);
      text-align: center;
      margin-bottom: 32px;
      font-family: var(--font-family);
    }
    
    .search-not-found-btn {
      width: 100%;
      height: 40px;
      margin-bottom: 64px;
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-glow-brand);
      font-weight: 700;
      font-family: var(--font-family);
    }
    
    .search-card-actions {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 16px;
    }
    
    .search-card-link {
      color: var(--brand);
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
      font-family: var(--font-family);
      transition: var(--transition-normal);
    }
    
    .search-card-link:hover {
      text-decoration: underline;
      color: var(--brand);
    }
    
    .search-card-action-btn {
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-glow-brand);
      font-weight: 700;
      font-family: var(--font-family);
    }
    
    /* ========== AUTOCOMPLETE DROPDOWN ========== */
    .autocomplete-dropdown {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--bg-soft);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-card);
      z-index: 1000;
      display: none;
      margin-top: -8px;
      overflow-y: auto;
      max-height: 200px;
      border: 1px solid rgba(5, 96, 253, 0.2);
      width: 100%;
    }
    
    .autocomplete-dropdown.show {
      display: block;
    }
    
    .autocomplete-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px 20px;
      cursor: pointer;
      transition: var(--transition-normal);
      border-bottom: 1px solid rgba(229, 231, 235, 0.3);
    }
    
    .autocomplete-item:last-child {
      border-bottom: none;
    }
    
    .autocomplete-item:hover {
      background: rgba(5, 96, 253, 0.1);
    }
    
    .autocomplete-icon {
      font-size: 16px;
      color: var(--text-muted);
      flex-shrink: 0;
    }
    
    .autocomplete-content {
      flex: 1;
    }
    
    .autocomplete-primary {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-base);
      font-family: var(--font-family);
      margin-bottom: 4px;
    }
    
    .autocomplete-secondary {
      font-size: 14px;
      color: var(--text-muted);
      font-family: var(--font-family);
    }
    
    /* ========== RESPONSIVE SEARCH CARD ========== */
    @media (max-width: 768px) {
      .search-card-surface {
        width: 100% !important;
        margin: 0 16px;
      }
      
      .search-card-surface {
        padding: 20px;
      }
      
      .search-card-heading {
        font-size: 18px;
        margin-bottom: 20px;
      }
      
      .search-card-description {
        margin-bottom: 32px;
      }
      
      .search-card-actions {
        flex-direction: column;
        align-items: stretch;
        gap: 12px;
      }
      
      .search-card-link {
        text-align: center;
        padding: 8px 0;
      }
    }
    
    @media (max-width: 480px) {
      .search-card-surface {
        padding: 16px;
      }
      
      .search-card-heading {
        font-size: 16px;
      }
      
      .search-input {
        height: 40px;
        font-size: 13px;
      }
      
      .search-not-found-btn {
        height: 36px;
        font-size: 13px;
      }
    }
    
    /* ========== DARK MODE SUPPORT ========== */
    [data-bs-theme="dark"] .sidebar {
      background: var(--bg-elev);
    }
    
    [data-bs-theme="dark"] .sidebar-topbar {
      background: var(--bg-soft);
      border-bottom-color: var(--border);
    }
    
    [data-bs-theme="dark"] .menu-item:hover {
      background: var(--bg-soft);
    }
    
    [data-bs-theme="dark"] .menu-item.active {
      background: var(--brand);
      box-shadow: var(--shadow-glow-brand);
    }
    
    [data-bs-theme="dark"] .search-card-surface {
      background: var(--bg-elev);
      box-shadow: var(--shadow-card);
    }
    
    [data-bs-theme="dark"] .search-input {
      background: var(--bg-soft);
      color: var(--text-base);
    }
    
    [data-bs-theme="dark"] .autocomplete-dropdown {
      background: var(--bg-soft);
      box-shadow: var(--shadow-card);
    }
    
    [data-bs-theme="dark"] .autocomplete-item:hover {
      background: rgba(59, 130, 246, 0.1);
    }
    
    /* ========== SEARCH CARD STYLES ========== */
    .search-card-surface {
      background: #F6F7FB;
      border-radius: 20px;
      box-shadow: 0 6px 16px rgba(0,0,0,.06);
      padding: 24px;
    }
    
    .search-card-heading {
      font-size: 20px;
      font-weight: 800;
      color: #0F1723;
      margin-bottom: 6px;
    }
    
    .search-card-description {
      font-size: 14px;
      color: #606060;
      margin-bottom: 12px;
    }
    
    .search-card-sub-description {
      font-size: 13px;
      color: #606060;
      margin-bottom: 8px;
    }
    
    .search-input-container {
      position: relative;
    }
    
    .search-input {
      width: 100%;
      height: 52px;
      padding: 12px 16px;
      border: 1px solid transparent;
      border-radius: 10px;
      background: #ECF0FF;
      font-size: 14px;
      color: #0F1723;
      box-shadow: 0 0 10px #0091D0;
      transition: all 0.2s ease;
    }
    
    .search-input:focus {
      outline: none;
      border-color: #0560FD;
      box-shadow: 0 0 10px #0091D0;
    }
    
    .search-input-icon {
      position: absolute;
      right: 16px;
      top: 50%;
      transform: translateY(-50%);
      color: #606060;
      font-size: 16px;
      pointer-events: none;
    }
    
    .search-card-divider {
      height: 1px;
      background: #606060;
      opacity: 0.4;
      margin: 8px 0;
    }
    
    .search-not-found-btn {
      width: 200px;
      height: 40px;
      background: #0560FD;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 0 10px #0091D0;
    }
    
    .search-not-found-btn:hover {
      background: #0047CC;
      transform: translateY(-1px);
    }
    
    .search-card-actions {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 16px;
    }
    
    .search-card-action-btn {
      background: #0560FD;
      color: white;
      border: none;
      border-radius: 10px;
      padding: 12px 24px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 0 10px #0091D0;
    }
    
    .search-card-action-btn:hover {
      background: #0047CC;
      transform: translateY(-1px);
    }
    
    .search-card-link {
      color: #0560FD;
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .search-card-link:hover {
      color: #0047CC;
      text-decoration: underline;
    }
    
    /* ========== RESULTS LIST STYLES ========== */
    .results-list-container {
      position: relative;
      margin: 0 auto;
    }
    
    .results-list-card {
      box-shadow: 0 6px 16px rgba(0,0,0,.06);
    }
    
    /* Toolbar Styles */
    .results-toolbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
      padding: 16px 0;
    }
    
    .toolbar-left {
      display: flex;
      align-items: center;
    }
    
    .toolbar-spacer {
      flex: 1;
    }
    
    .results-count {
      font-size: 14px;
      color: var(--text-muted);
      font-family: var(--font-family);
    }
    
    .toolbar-right {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .filter-chips {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .filter-chip {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      background: var(--bg-soft);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: var(--transition-normal);
      font-size: 13px;
      font-family: var(--font-family);
    }
    
    .filter-chip:hover {
      background: rgba(5, 96, 253, 0.1);
      border-color: var(--brand);
    }
    
    .chip-label {
      color: var(--text-base);
      font-weight: 500;
    }
    
    .chip-icon {
      font-size: 12px;
      color: var(--text-muted);
      transition: var(--transition-normal);
    }
    
    .filter-chip:hover .chip-icon {
      color: var(--brand);
    }
    
    .add-product-btn {
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-glow-brand);
      font-weight: 700;
      font-family: var(--font-family);
    }
    
    /* Results List Styles */
    .results-list {
      background: transparent;
      border-radius: 0;
      overflow: visible;
      box-shadow: none;
      width: 100%;
    }
    
    /* Table Header */
    .results-header {
      display: grid;
      grid-template-columns: 560px 120px 120px 160px 220px 140px;
      gap: 16px;
      padding: 16px 20px;
      background: #F6F7FB;
      border-radius: 10px;
      margin-bottom: 8px;
      font-weight: 700;
      font-size: 14px;
      color: var(--text-base);
      font-family: var(--font-family);
    }
    
    .header-cell {
      text-align: center;
    }
    
    .header-cell.title-col {
      text-align: right;
    }
    
    /* Column Classes */
    .title-col { width: 560px; }
    .status-col { width: 120px; }
    .commission-col { width: 120px; }
    .ref-price-col { width: 160px; }
    .min-city-price-col { width: 220px; }
    .sellers-col { width: 140px; }
    
    /* Table Rows */
    .results-rows {
      display: flex;
      flex-direction: column;
    }
    
    .result-row {
      display: grid;
      grid-template-columns: 560px 120px 120px 160px 220px 140px;
      gap: 16px;
      padding: 16px;
      background: #FFFFFF;
      border: 1px solid #E5E7EB;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin-bottom: 8px;
      transition: var(--transition-normal);
      position: relative;
    }
    
    .result-row:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .result-row:last-child {
      margin-bottom: 0;
    }
    
    .result-cell {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-family: var(--font-family);
    }
    
    .result-cell.title-col {
      justify-content: flex-start;
      flex-direction: column;
      align-items: flex-start;
    }
    
    .product-title {
      font-size: 14px;
      font-weight: 700;
      color: var(--text-base);
      margin-bottom: 4px;
      line-height: 1.4;
    }
    
    .product-code {
      font-size: 12px;
      color: var(--text-muted);
      font-weight: 800;
    }
    
    .product-thumb {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .product-thumb img {
      border-radius: var(--radius-sm);
      object-fit: cover;
    }
    
    /* Status Badges */
    .status-badge {
      padding: 4px 8px;
      border-radius: var(--radius-sm);
      font-size: 12px;
      font-weight: 600;
      font-family: var(--font-family);
    }
    
    .status-available {
      background: rgba(25, 135, 84, 0.15);
      color: #198754;
    }
    
    .status-unavailable {
      background: rgba(237, 28, 36, 0.1);
      color: #ED1C24;
    }
    
    .status-pending {
      background: rgba(255, 193, 7, 0.1);
      color: #ffc107;
    }
    
    
    /* ========== RESPONSIVE RESULTS LIST ========== */
    @media (max-width: 1200px) {
      .results-header,
      .result-row {
        grid-template-columns: 400px 100px 100px 140px 180px 120px;
        gap: 12px;
        padding: 12px 16px;
      }
      
      .title-col { width: 400px; }
      .status-col, .commission-col { width: 100px; }
      .ref-price-col { width: 140px; }
      .min-city-price-col { width: 180px; }
      .sellers-col { width: 120px; }
    }
    
    @media (max-width: 768px) {
      .results-toolbar {
        flex-direction: column;
        align-items: stretch;
        gap: 16px;
      }
      
      .toolbar-right {
        justify-content: space-between;
      }
      
      .filter-chips {
        flex-wrap: wrap;
        gap: 6px;
      }
      
      .filter-chip {
        font-size: 12px;
        padding: 4px 8px;
      }
      
      .results-header {
        display: none;
      }
      
      .result-row {
        display: block;
        padding: 16px;
        margin-bottom: 16px;
      }
      
      .result-cell {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
        padding: 4px 0;
      }
      
      .result-cell:last-child {
        margin-bottom: 0;
      }
      
      .result-cell::before {
        content: attr(data-label);
        font-weight: 600;
        color: var(--text-muted);
        font-size: 12px;
      }
      
      .result-cell.title-col::before { content: "عنوان:"; }
      .result-cell.status-col::before { content: "وضعیت:"; }
      .result-cell.commission-col::before { content: "کمیسیون:"; }
      .result-cell.ref-price-col::before { content: "قیمت مرجع:"; }
      .result-cell.min-city-price-col::before { content: "کمترین قیمت:"; }
      .result-cell.sellers-col::before { content: "تعداد فروشندگان:"; }
      
      .result-actions {
        position: static;
        transform: none;
        opacity: 1;
        margin-top: 12px;
        text-align: center;
      }
    }
    
    @media (max-width: 480px) {
      .results-list-container {
        margin-top: 16px;
      }
      
      .filter-chips {
        display: none;
      }
      
      .toolbar-right {
        justify-content: center;
      }
      
      .add-product-btn {
        width: 100%;
      }
    }
    
    /* ========== DARK MODE RESULTS LIST ========== */
    [data-bs-theme="dark"] .results-list {
      background: var(--bg-elev);
    }
    
    [data-bs-theme="dark"] .results-header {
      background: var(--bg-soft);
      border-bottom-color: var(--border);
    }
    
    [data-bs-theme="dark"] .result-row {
      background: var(--bg-soft);
      border-color: rgba(152, 190, 255, 0.3);
    }
    
    [data-bs-theme="dark"] .filter-chip {
      background: var(--bg-elev);
      border-color: var(--border);
    }
    
    [data-bs-theme="dark"] .filter-chip:hover {
      background: rgba(59, 130, 246, 0.1);
      border-color: var(--brand);
    }
    
    /* ========== MODAL STYLES ========== */
    .modal-content {
      border-radius: var(--radius-lg);
      border: none;
      box-shadow: var(--shadow-md);
    }
    
    .modal-header {
      border-bottom: 1px solid var(--border);
      padding: 20px 24px;
    }
    
    .modal-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-base);
      font-family: var(--font-family);
      margin: 0;
    }
    
    .btn-close {
      background: none;
      border: none;
      font-size: 18px;
      opacity: 0.6;
      transition: var(--transition-normal);
    }
    
    .btn-close:hover {
      opacity: 1;
    }
    
    .modal-body {
      padding: 24px;
    }
    
    .modal-description {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 20px;
      font-family: var(--font-family);
      line-height: 1.5;
    }
    
    .modal-subtext {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 20px;
      font-family: var(--font-family);
      line-height: 1.5;
    }
    
    /* Product Information Surface */
    .product-info-surface {
      background: var(--bg-soft);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-glow-brand);
      padding: 16px;
    }
    
    .product-info-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    
    .product-info-item {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    
    .product-info-label {
      font-size: 12px;
      color: var(--text-muted);
      font-weight: 500;
      font-family: var(--font-family);
    }
    
    .product-info-value {
      font-size: 14px;
      color: var(--text-base);
      font-weight: 600;
      font-family: var(--font-family);
    }
    
    .product-title-value {
      font-weight: 700;
      line-height: 1.4;
    }
    
    .product-image-item {
      align-items: flex-end;
      justify-content: flex-end;
    }
    
    .product-info-image {
      width: 48px;
      height: 88px;
      object-fit: cover;
      border-radius: var(--radius-sm);
    }
    
    .modal-footer {
      border-top: 1px solid var(--border);
      padding: 20px 24px;
      display: flex;
      justify-content: flex-end;
      gap: 12px;
    }
    
    .modal-sell-btn {
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-glow-brand);
      font-weight: 700;
      font-family: var(--font-family);
    }
    
    /* ========== RESPONSIVE MODAL ========== */
    @media (max-width: 768px) {
      .modal-dialog {
        margin: 16px;
      }
      
      .modal-header,
      .modal-body,
      .modal-footer {
        padding: 16px;
      }
      
      .modal-title {
        font-size: 18px;
      }
      
      .product-info-grid {
        grid-template-columns: 1fr;
        gap: 16px;
      }
      
      .product-image-item {
        align-items: center;
        justify-content: center;
        order: -1;
      }
      
      .product-info-image {
        width: 64px;
        height: 120px;
      }
      
      .modal-footer {
        flex-direction: column-reverse;
        gap: 8px;
      }
      
      .modal-footer .btn {
        width: 100%;
      }
    }
    
    @media (max-width: 480px) {
      .modal-dialog {
        margin: 8px;
      }
      
      .modal-header,
      .modal-body,
      .modal-footer {
        padding: 12px;
      }
      
      .modal-title {
        font-size: 16px;
      }
      
      .product-info-surface {
        padding: 12px;
      }
      
      .product-info-image {
        width: 56px;
        height: 100px;
      }
    }
    
    /* ========== DARK MODE MODAL ========== */
    [data-bs-theme="dark"] .modal-content {
      background: var(--bg-elev);
      box-shadow: var(--shadow-md);
    }
    
    [data-bs-theme="dark"] .modal-header {
      border-bottom-color: var(--border);
    }
    
    [data-bs-theme="dark"] .modal-footer {
      border-top-color: var(--border);
    }
    
    [data-bs-theme="dark"] .product-info-surface {
      background: var(--bg-soft);
      box-shadow: var(--shadow-glow-brand);
    }
    
    [data-bs-theme="dark"] .btn-close {
      filter: invert(1);
    }
    
    /* ========== SECOND MODAL STYLES ========== */
    .modal-subtext {
      font-size: 14px;
      color: var(--text-base);
      margin-bottom: 20px;
      font-family: var(--font-family);
      line-height: 1.5;
    }
    
    /* Product Confirmation Surface */
    .product-confirmation-surface {
      background: var(--bg-soft);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-glow-brand);
      padding: 16px;
    }
    
    .product-confirmation-text {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 16px;
      font-family: var(--font-family);
      line-height: 1.5;
    }
    
    .product-confirmation-details {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .product-confirmation-code {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-base);
      font-family: var(--font-family);
    }
    
    .product-confirmation-image {
      width: 36px;
      height: 64px;
      object-fit: cover;
      border-radius: var(--radius-sm);
    }
    
    .modal-register-variant-btn {
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-glow-brand);
      font-weight: 700;
      font-family: var(--font-family);
    }
    
    /* ========== RESPONSIVE SECOND MODAL ========== */
    @media (max-width: 768px) {
      .product-confirmation-details {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
      }
      
      .product-confirmation-image {
        align-self: flex-end;
        width: 48px;
        height: 80px;
      }
    }
    
    @media (max-width: 480px) {
      .product-confirmation-surface {
        padding: 12px;
      }
      
      .product-confirmation-image {
        width: 40px;
        height: 72px;
      }
    }
    
    /* ========== DARK MODE SECOND MODAL ========== */
    [data-bs-theme="dark"] .product-confirmation-surface {
      background: var(--bg-soft);
      box-shadow: var(--shadow-glow-brand);
    }
    
    /* ========== THIRD MODAL STYLES ========== */
    .modal-divider {
      height: 1px;
      background: var(--text-muted);
      opacity: 0.4;
      margin: 12px 0;
    }
    
    /* Variant Form Styles */
    .variant-form {
      margin-top: 20px;
    }
    
    .variant-form-grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 12px;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    
    .form-label {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-base);
      font-family: var(--font-family);
      margin: 0;
    }
    
    .form-label.required::after {
      content: " *";
      color: var(--danger);
    }
    
    .form-control,
    .form-select {
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 8px 12px;
      font-size: 14px;
      font-family: var(--font-family);
      color: var(--text-base);
      background: var(--bg-base);
      transition: var(--transition-normal);
    }
    
    .form-control:focus,
    .form-select:focus {
      outline: none;
      border-color: var(--brand);
      box-shadow: 0 0 0 2px rgba(5, 96, 253, 0.1);
    }
    
    .form-control::placeholder {
      color: var(--text-muted);
    }
    
    .form-select {
      cursor: pointer;
    }
    
    .modal-add-to-list-btn {
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-glow-brand);
      font-weight: 700;
      font-family: var(--font-family);
    }
    
    #addNewVariantBtn {
      border-radius: var(--radius-md);
      font-weight: 600;
      font-family: var(--font-family);
    }
    
    /* ========== RESPONSIVE THIRD MODAL ========== */
    @media (max-width: 1200px) {
      .variant-form-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 16px;
      }
    }
    
    @media (max-width: 768px) {
      .variant-form-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
      }
      
      .modal-footer {
        flex-direction: column-reverse;
        gap: 8px;
      }
      
      .modal-footer .btn {
        width: 100%;
      }
    }
    
    @media (max-width: 480px) {
      .variant-form-grid {
        grid-template-columns: 1fr;
        gap: 16px;
      }
      
      .form-control,
      .form-select {
        padding: 10px 12px;
        font-size: 16px; /* Prevent zoom on iOS */
      }
    }
    
    /* ========== DARK MODE THIRD MODAL ========== */
    [data-bs-theme="dark"] .form-control,
    [data-bs-theme="dark"] .form-select {
      background: var(--bg-elev);
      border-color: var(--border);
      color: var(--text-base);
    }
    
    [data-bs-theme="dark"] .form-control:focus,
    [data-bs-theme="dark"] .form-select:focus {
      border-color: var(--brand);
      box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
    }
    
    [data-bs-theme="dark"] .form-control::placeholder {
      color: var(--text-muted);
    }
  </style>
</head>
<body>
  <!-- Mobile Menu Button -->
  <button class="mobile-menu-btn" id="mobileMenuBtn">
    <i class="bi bi-list"></i>
  </button>

  <!-- Layout Container -->
  <div class="layout-container">
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
      <!-- Sidebar Topbar -->
      <div class="sidebar-topbar">
        <div class="topbar-left">
          <h6 class="topbar-user-name">نام فروشنده</h6>
        </div>
        
        <div class="topbar-spacer"></div>
        
        <div class="topbar-right">
          <button class="topbar-icon" title="آپلود">
            <i class="bi bi-upload"></i>
          </button>
          <button class="topbar-icon" title="اعلان‌ها">
            <i class="bi bi-bell"></i>
            <span class="topbar-badge">24</span>
          </button>
          <div class="topbar-avatar">
            <i class="bi bi-person-fill"></i>
          </div>
        </div>
      </div>
      
      <!-- Sidebar Menu -->
      <div class="sidebar-menu">
        <!-- پیشخوان Section -->
        <div class="menu-section">
          <div class="menu-section-title">پیشخوان</div>
          <a href="#" class="menu-item">
            <i class="bi bi-grid-3x3-gap"></i>
            <span class="menu-item-label">پیشخوان</span>
          </a>
        </div>
        
        <!-- کالا Section -->
        <div class="menu-section">
          <div class="menu-section-title">کالا</div>
          <a href="#" class="menu-item active">
            <i class="bi bi-search"></i>
            <span class="menu-item-label">جستجو و ثبت کالا</span>
          </a>
          <a href="#" class="menu-item">
            <i class="bi bi-box-seam"></i>
            <span class="menu-item-label">مدیریت کالا و افزودن تنوع</span>
          </a>
          <a href="#" class="menu-item">
            <i class="bi bi-plus-square"></i>
            <span class="menu-item-label">مدیریت تنوع و قیمت گذاری</span>
          </a>
          <a href="#" class="menu-item">
            <i class="bi bi-clipboard-data"></i>
            <span class="menu-item-label">گزارش موجودی کالا</span>
          </a>
        </div>
        
        <!-- سفارش‌ها Section -->
        <div class="menu-section">
          <div class="menu-section-title">سفارش‌ها</div>
          <a href="#" class="menu-item">
            <i class="bi bi-truck"></i>
            <span class="menu-item-label">مدیریت سفارشات جاری</span>
          </a>
          <a href="#" class="menu-item">
            <i class="bi bi-clock-history"></i>
            <span class="menu-item-label">تاریخچه سفارشات</span>
          </a>
        </div>
        
        <!-- مالی Section -->
        <div class="menu-section">
          <div class="menu-section-title">مالی</div>
          <a href="#" class="menu-item">
            <i class="bi bi-receipt"></i>
            <span class="menu-item-label">صورتحساب ها</span>
          </a>
        </div>
        
        <!-- تحلیل عملکرد Section -->
        <div class="menu-section">
          <div class="menu-section-title">تحلیل عملکرد</div>
          <a href="#" class="menu-item">
            <i class="bi bi-bar-chart-line"></i>
            <span class="menu-item-label">فروش و درآمد</span>
          </a>
          <a href="#" class="menu-item">
            <i class="bi bi-arrow-counterclockwise"></i>
            <span class="menu-item-label">مرجوعی</span>
          </a>
        </div>
        
        <!-- راهنما Section -->
        <div class="menu-section">
          <div class="menu-section-title">راهنما</div>
          <a href="#" class="menu-item">
            <i class="bi bi-mortarboard"></i>
            <span class="menu-item-label">مرکز آموزش فروشندگان</span>
          </a>
          <a href="#" class="menu-item">
            <i class="bi bi-shield-exclamation"></i>
            <span class="menu-item-label">کالاهای غیرمجاز</span>
          </a>
        </div>
        
        <!-- پشتیبانی Section -->
        <div class="menu-section">
          <div class="menu-section-title">پشتیبانی</div>
          <a href="#" class="menu-item">
            <i class="bi bi-headset"></i>
            <span class="menu-item-label">درخواست پشتیبانی</span>
          </a>
        </div>
      </div>
    </div>
    
    <!-- Main Content Area -->
    <div class="main-content d-flex justify-content-center align-items-center" style="min-height: 100vh; background: var(--bg-base);" id="mainContent">
    
      
      <!-- Search Card Section -->
      <div class="search-card-surface" style="width: 820px; padding: 40px;">
            <h5 class="search-card-heading text-center mb-4">ثبت کالا برای فروش</h5>
            <p class="search-card-description text-center mb-4">ابتدا کالای مد نظر خود را در استاویتا جستجو کنید:</p>
            
             <!-- Search Input Container -->
             <div class="search-input-container mb-4 position-relative">
               <input type="text" id="productSearch" class="search-input" placeholder="جستجوی کالا" style="padding-right: 50px;">
               <i class="bi bi-search search-input-icon"></i>
               
               <!-- Autocomplete Dropdown -->
               <div class="autocomplete-dropdown" id="searchSuggestions">
                 <div class="autocomplete-item">
                   <i class="bi bi-search autocomplete-icon"></i>
                   <div class="autocomplete-content">
                     <div class="autocomplete-primary">نمونه</div>
                     <div class="autocomplete-secondary">در دسته نمونه</div>
                   </div>
                 </div>
                 <div class="autocomplete-item">
                   <i class="bi bi-search autocomplete-icon"></i>
                   <div class="autocomplete-content">
                     <div class="autocomplete-primary">نمونه</div>
                     <div class="autocomplete-secondary">در دسته نمونه نمونه</div>
                   </div>
                 </div>
                 <div class="autocomplete-item">
                   <i class="bi bi-search autocomplete-icon"></i>
                   <div class="autocomplete-content">
                     <div class="autocomplete-primary">نمونه</div>
                     <div class="autocomplete-secondary">در دسته نمونه نمونه نمونه</div>
                   </div>
                 </div>
                 <div class="autocomplete-item">
                   <i class="bi bi-search autocomplete-icon"></i>
                   <div class="autocomplete-content">
                     <div class="autocomplete-primary">نمونه</div>
                     <div class="autocomplete-secondary">در دسته نمونه نمونه نمونه نمونه</div>
                   </div>
                 </div>
                 <div class="autocomplete-item">
                   <i class="bi bi-search autocomplete-icon"></i>
                   <div class="autocomplete-content">
                     <div class="autocomplete-primary">نمونه</div>
                     <div class="autocomplete-secondary">در دسته نمونه نمونه نمونه نمونه نمونه</div>
                   </div>
                 </div>
                 <div class="autocomplete-item">
                   <i class="bi bi-search autocomplete-icon"></i>
                   <div class="autocomplete-content">
                     <div class="autocomplete-primary">نمونه</div>
                     <div class="autocomplete-secondary">در دسته نمونه نمونه نمونه نمونه نمونه نمونه</div>
                   </div>
                 </div>
                 <div class="autocomplete-item">
                   <i class="bi bi-search autocomplete-icon"></i>
                   <div class="autocomplete-content">
                     <div class="autocomplete-primary">نمونه</div>
                     <div class="autocomplete-secondary">در دسته نمونه نمونه نمونه نمونه نمونه نمونه نمونه</div>
                   </div>
                 </div>
                 <div class="autocomplete-item">
                   <i class="bi bi-search autocomplete-icon"></i>
                   <div class="autocomplete-content">
                     <div class="autocomplete-primary">نمونه</div>
                     <div class="autocomplete-secondary">در دسته نمونه نمونه نمونه نمونه نمونه نمونه نمونه نمونه</div>
                   </div>
                 </div>
               </div>
             </div>
            
             <!-- Divider -->
             <div class="search-card-divider mb-4"></div>
            
            <div class="d-flex flex-column align-items-start mb-4">
              <p class="search-card-sub-description text-start mb-3" style="font-size: 13px;">اگر کالا پیدا نشد، دسته بندی کالا را مشخص کنید :</p>
              
              <!-- Not Found Button -->
              <button class="btn btn-brand search-not-found-btn" id="notFoundBtn" style="width: 200px; font-size: 13px;">
                کالای مورد نظر را پیدا نکردم
              </button>
            </div>
            
            <!-- Actions -->
            <div class="search-card-actions d-flex justify-content-end align-items-center">
              <a href="#" class="search-card-link">بازگشت</a>
              <button class="btn btn-brand search-card-action-btn" onclick="hidden1()">
                مشاهده لیست کالاها
              </button>
            </div>
          </div>
        
        <!-- Results List Section -->
        <div class="" id="card1" style="margin: auto; width: 100%; padding: 20px; display: none;">
          <div class="results-list-container" style="max-width: 1360px; margin: 0 auto;">
            <!-- Toolbar -->
            <div class="results-toolbar mb-4">
              <!-- Top Row: Search and Filter Button -->
              <div class="d-flex justify-content-between align-items-center mb-3">
                <div class="d-flex align-items-center gap-3">
                  <div class="search-container position-relative">
                    <input type="text" class="form-control" placeholder="نمونه" style="width: 200px; background: #F6F7FB; border: 1px solid #E5E7EB; border-radius: 8px; padding-right: 40px;">
                    <i class="bi bi-search position-absolute top-50 end-0 translate-middle-y me-3 text-muted"></i>
                  </div>
                  <button class="btn btn-outline-secondary d-flex align-items-center gap-2" style="background: #F6F7FB; border: 1px solid #E5E7EB; border-radius: 8px;">
                    <i class="bi bi-funnel"></i>
                    فیلترها (1)
                  </button>
                </div>
                <button class="btn btn-primary d-flex align-items-center gap-2" style="background: #0560FD; border: none; border-radius: 8px; box-shadow: 0 0 10px #0091D0;">
                  <i class="bi bi-plus-lg"></i> ثبت کالای جدید
                </button>
              </div>
              
              <!-- Bottom Row: Results Count and Filter Chips -->
              <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex align-items-center gap-3">
                  <span class="text-primary fw-medium">تعداد نتایج : ۱۲۵۶</span>
                  <div class="d-flex gap-2">
                    <button class="btn btn-primary btn-sm d-flex align-items-center gap-1" style="background: #0560FD; border: none; border-radius: 20px; padding: 6px 12px;">فیلتر اول <i class="bi bi-chevron-down"></i></button>
                    <button class="btn btn-primary btn-sm d-flex align-items-center gap-1" style="background: #0560FD; border: none; border-radius: 20px; padding: 6px 12px;">فیلتر دوم <i class="bi bi-chevron-down"></i></button>
                    <button class="btn btn-primary btn-sm d-flex align-items-center gap-1" style="background: #0560FD; border: none; border-radius: 20px; padding: 6px 12px;">فیلتر سوم <i class="bi bi-chevron-down"></i></button>
                    <button class="btn btn-primary btn-sm d-flex align-items-center gap-1" style="background: #0560FD; border: none; border-radius: 20px; padding: 6px 12px;">فیلتر چهارم <i class="bi bi-chevron-down"></i></button>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Results Table Container with Scrolling -->
            <div class="table-container" style="background: #F6F7FB; border-radius: 20px; padding: 24px; max-height: 600px; overflow-y: auto; overflow-x: auto;">
              <!-- Table Header -->
              <div class="table-header" style="background: #E5E7EB; border-radius: 8px; padding: 16px 24px; margin-bottom: 12px;">
                <div class="row g-0">
                  <div class="col-4 text-end fw-normal">عنوان کالا</div>
                  <div class="col-1 text-center fw-normal">وضعیت</div>
                  <div class="col-1 text-center fw-normal">کمسیون</div>
                  <div class="col-2 text-center fw-normal">قیمت مرجع (ریال)</div>
                  <div class="col-2 text-center fw-normal">کمترین قیمت در استاویتا (ریال)</div>
                  <div class="col-2 text-center fw-normal">تعداد فروشندگان</div>
                </div>
              </div>
              
              <!-- Table Rows -->
              <div class="table-rows">
                <!-- Row 1 -->
                <div class="table-row mb-3" style="background: white; border: 1px solid #E3F2FD; border-radius: 8px; padding: 16px 24px;">
                  <div class="row g-0 align-items-center">
                    <div class="col-4 text-end">
                      <div class="d-flex align-items-center gap-3">
                        <img src="img/9af2fabbbddbfac8170bd375a3176d323a5a6460.png" alt="Product" class="product-image" style="width: 36px; height: 64px; object-fit: cover; border-radius: 4px; border: 1px solid #E5E7EB;">
                        <div class="text-start">
                          <div class="product-title text-dark mb-1" style="font-size: 14px; line-height: 1.4;">لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ و با استفاده از طراحان گرافیک است</div>
                          <div class="product-code text-muted" style="font-size: 12px;">STA-4586</div>
                        </div>
                      </div>
                    </div>
                    <div class="col-1 text-center">
                      <span class="badge" style="background: #E8F5E8; color: #2E7D32; padding: 4px 8px; border-radius: 4px;">قابل فروش</span>
                    </div>
                    <div class="col-1 text-center">۹%</div>
                    <div class="col-2 text-center">۱۵,۷۵۰,۰۰۰</div>
                    <div class="col-2 text-center">۱۴,۲۵۰,۰۰۰</div>
                    <div class="col-2 text-center">۳</div>
                  </div>
                </div>
                
                <!-- Row 2 -->
                <div class="table-row mb-3" style="background: white; border: 1px solid #E3F2FD; border-radius: 8px; padding: 16px 24px;">
                  <div class="row g-0 align-items-center">
                    <div class="col-4 text-end">
                      <div class="d-flex align-items-center gap-3">
                        <img src="img/9af2fabbbddbfac8170bd375a3176d323a5a6460.png" alt="Product" class="product-image" style="width: 36px; height: 64px; object-fit: cover; border-radius: 4px; border: 1px solid #E5E7EB;">
                        <div class="text-start">
                          <div class="product-title text-dark mb-1" style="font-size: 14px; line-height: 1.4;">لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ و با استفاده از طراحان گرافیک است</div>
                          <div class="product-code text-muted" style="font-size: 12px;">STA-4587</div>
                        </div>
                      </div>
                    </div>
                    <div class="col-1 text-center">
                      <span class="badge" style="background: #E8F5E8; color: #2E7D32; padding: 4px 8px; border-radius: 4px;">قابل فروش</span>
                    </div>
                    <div class="col-1 text-center">۸%</div>
                    <div class="col-2 text-center">۹,۲۰۰,۰۰۰</div>
                    <div class="col-2 text-center">۸,۷۵۰,۰۰۰</div>
                    <div class="col-2 text-center">۵</div>
                  </div>
                </div>
                
                <!-- Row 3 -->
                <div class="table-row mb-3" style="background: white; border: 1px solid #E3F2FD; border-radius: 8px; padding: 16px 24px;">
                  <div class="row g-0 align-items-center">
                    <div class="col-4 text-end">
                      <div class="d-flex align-items-center gap-3">
                        <img src="img/9af2fabbbddbfac8170bd375a3176d323a5a6460.png" alt="Product" class="product-image" style="width: 36px; height: 64px; object-fit: cover; border-radius: 4px; border: 1px solid #E5E7EB;">
                        <div class="text-start">
                          <div class="product-title text-dark mb-1" style="font-size: 14px; line-height: 1.4;">لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ و با استفاده از طراحان گرافیک است</div>
                          <div class="product-code text-muted" style="font-size: 12px;">STA-4588</div>
                        </div>
                      </div>
                    </div>
                    <div class="col-1 text-center">
                      <span class="badge" style="background: #FFEBEE; color: #C62828; padding: 4px 8px; border-radius: 4px;">غیرقابل فروش</span>
                    </div>
                    <div class="col-1 text-center">۷%</div>
                    <div class="col-2 text-center">۲۴,۰۰۰,۰۰۰</div>
                    <div class="col-2 text-center">۲۲,۵۰۰,۰۰۰</div>
                    <div class="col-2 text-center">۲</div>
                  </div>
                </div>
                
                <!-- Row 4 -->
                <div class="table-row mb-3" style="background: white; border: 1px solid #E3F2FD; border-radius: 8px; padding: 16px 24px;">
                  <div class="row g-0 align-items-center">
                    <div class="col-4 text-end">
                      <div class="d-flex align-items-center gap-3">
                        <img src="img/9af2fabbbddbfac8170bd375a3176d323a5a6460.png" alt="Product" class="product-image" style="width: 36px; height: 64px; object-fit: cover; border-radius: 4px; border: 1px solid #E5E7EB;">
                        <div class="text-start">
                          <div class="product-title text-dark mb-1" style="font-size: 14px; line-height: 1.4;">لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ و با استفاده از طراحان گرافیک است</div>
                          <div class="product-code text-muted" style="font-size: 12px;">STA-4589</div>
                        </div>
                      </div>
                    </div>
                    <div class="col-1 text-center">
                      <span class="badge" style="background: #E8F5E8; color: #2E7D32; padding: 4px 8px; border-radius: 4px;">قابل فروش</span>
                    </div>
                    <div class="col-1 text-center">۶%</div>
                    <div class="col-2 text-center">۷,۲۰۰,۰۰۰</div>
                    <div class="col-2 text-center">۶,۸۰۰,۰۰۰</div>
                    <div class="col-2 text-center">۷</div>
                  </div>
                </div>
                
                <!-- Row 5 -->
                <div class="table-row mb-3" style="background: white; border: 1px solid #E3F2FD; border-radius: 8px; padding: 16px 24px;">
                  <div class="row g-0 align-items-center">
                    <div class="col-4 text-end">
                      <div class="d-flex align-items-center gap-3">
                        <img src="img/9af2fabbbddbfac8170bd375a3176d323a5a6460.png" alt="Product" class="product-image" style="width: 36px; height: 64px; object-fit: cover; border-radius: 4px; border: 1px solid #E5E7EB;">
                        <div class="text-start">
                          <div class="product-title text-dark mb-1" style="font-size: 14px; line-height: 1.4;">لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ و با استفاده از طراحان گرافیک است</div>
                          <div class="product-code text-muted" style="font-size: 12px;">STA-4590</div>
                        </div>
                      </div>
                    </div>
                    <div class="col-1 text-center">
                      <span class="badge" style="background: #FFF3E0; color: #F57C00; padding: 4px 8px; border-radius: 4px;">در انتظار تایید</span>
                    </div>
                    <div class="col-1 text-center">۵%</div>
                    <div class="col-2 text-center">۲۰,۰۰۰,۰۰۰</div>
                    <div class="col-2 text-center">۱۸,۹۰۰,۰۰۰</div>
                    <div class="col-2 text-center">۱</div>
                  </div>
                </div>
                
                <!-- Row 6 -->
                <div class="table-row mb-3" style="background: white; border: 1px solid #E3F2FD; border-radius: 8px; padding: 16px 24px;">
                  <div class="row g-0 align-items-center">
                    <div class="col-4 text-end">
                      <div class="d-flex align-items-center gap-3">
                        <img src="img/9af2fabbbddbfac8170bd375a3176d323a5a6460.png" alt="Product" class="product-image" style="width: 36px; height: 64px; object-fit: cover; border-radius: 4px; border: 1px solid #E5E7EB;">
                        <div class="text-start">
                          <div class="product-title text-dark mb-1" style="font-size: 14px; line-height: 1.4;">لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ و با استفاده از طراحان گرافیک است</div>
                          <div class="product-code text-muted" style="font-size: 12px;">STA-4591</div>
                        </div>
                      </div>
                    </div>
                    <div class="col-1 text-center">
                      <span class="badge" style="background: #E8F5E8; color: #2E7D32; padding: 4px 8px; border-radius: 4px;">قابل فروش</span>
                    </div>
                    <div class="col-1 text-center">۴%</div>
                    <div class="col-2 text-center">۱۳,۰۰۰,۰۰۰</div>
                    <div class="col-2 text-center">۱۲,۳۰۰,۰۰۰</div>
                    <div class="col-2 text-center">۴</div>
                  </div>
                </div>
                
                <!-- Row 7 -->
                <div class="table-row mb-3" style="background: white; border: 1px solid #E3F2FD; border-radius: 8px; padding: 16px 24px;">
                  <div class="row g-0 align-items-center">
                    <div class="col-4 text-end">
                      <div class="d-flex align-items-center gap-3">
                        <img src="img/9af2fabbbddbfac8170bd375a3176d323a5a6460.png" alt="Product" class="product-image" style="width: 36px; height: 64px; object-fit: cover; border-radius: 4px; border: 1px solid #E5E7EB;">
                        <div class="text-start">
                          <div class="product-title text-dark mb-1" style="font-size: 14px; line-height: 1.4;">لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ و با استفاده از طراحان گرافیک است</div>
                          <div class="product-code text-muted" style="font-size: 12px;">STA-4592</div>
                        </div>
                      </div>
                    </div>
                    <div class="col-1 text-center">
                      <span class="badge" style="background: #E8F5E8; color: #2E7D32; padding: 4px 8px; border-radius: 4px;">قابل فروش</span>
                    </div>
                    <div class="col-1 text-center">۳%</div>
                    <div class="col-2 text-center">۱۰,۵۰۰,۰۰۰</div>
                    <div class="col-2 text-center">۹,۸۰۰,۰۰۰</div>
                    <div class="col-2 text-center">۶</div>
                  </div>
                </div>
                
                <!-- Additional rows for scrolling demonstration -->
                <div class="table-row mb-3" style="background: white; border: 1px solid #E3F2FD; border-radius: 8px; padding: 16px 24px;">
                  <div class="row g-0 align-items-center">
                    <div class="col-4 text-end">
                      <div class="d-flex align-items-center gap-3">
                        <img src="img/9af2fabbbddbfac8170bd375a3176d323a5a6460.png" alt="Product" class="product-image" style="width: 36px; height: 64px; object-fit: cover; border-radius: 4px; border: 1px solid #E5E7EB;">
                        <div class="text-start">
                          <div class="product-title text-dark mb-1" style="font-size: 14px; line-height: 1.4;">لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ و با استفاده از طراحان گرافیک است</div>
                          <div class="product-code text-muted" style="font-size: 12px;">STA-4593</div>
                        </div>
                      </div>
                    </div>
                    <div class="col-1 text-center">
                      <span class="badge" style="background: #E8F5E8; color: #2E7D32; padding: 4px 8px; border-radius: 4px;">قابل فروش</span>
                    </div>
                    <div class="col-1 text-center">۲%</div>
                    <div class="col-2 text-center">۸,۵۰۰,۰۰۰</div>
                    <div class="col-2 text-center">۷,۹۰۰,۰۰۰</div>
                    <div class="col-2 text-center">۸</div>
                  </div>
                </div>
                
                <div class="table-row mb-3" style="background: white; border: 1px solid #E3F2FD; border-radius: 8px; padding: 16px 24px;">
                  <div class="row g-0 align-items-center">
                    <div class="col-4 text-end">
                      <div class="d-flex align-items-center gap-3">
                        <img src="img/9af2fabbbddbfac8170bd375a3176d323a5a6460.png" alt="Product" class="product-image" style="width: 36px; height: 64px; object-fit: cover; border-radius: 4px; border: 1px solid #E5E7EB;">
                        <div class="text-start">
                          <div class="product-title text-dark mb-1" style="font-size: 14px; line-height: 1.4;">لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ و با استفاده از طراحان گرافیک است</div>
                          <div class="product-code text-muted" style="font-size: 12px;">STA-4594</div>
                        </div>
                      </div>
                    </div>
                    <div class="col-1 text-center">
                      <span class="badge" style="background: #E8F5E8; color: #2E7D32; padding: 4px 8px; border-radius: 4px;">قابل فروش</span>
                    </div>
                    <div class="col-1 text-center">۱%</div>
                    <div class="col-2 text-center">۶,۲۰۰,۰۰۰</div>
                    <div class="col-2 text-center">۵,۸۰۰,۰۰۰</div>
                    <div class="col-2 text-center">۹</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Verify Same Product -->
  <div class="modal fade" id="modal-verify-same-product" tabindex="-1" aria-labelledby="modal-verify-same-product-label" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
          <h5 class="modal-title" id="modal-verify-same-product-label">همین کالا را می‌فروشید ؟</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="بستن"></button>
        </div>
        
        <!-- Modal Body -->
        <div class="modal-body">
          <p class="modal-subtext">اگر مشخصات این کالا با کالای شما منطبق است، می‌توانید این کالا را بفروشید</p>
          
          <!-- Product Information Surface -->
          <div class="product-info-surface">
            <div class="product-info-grid">
              <!-- Row 1: Title and Image -->
              <div class="product-info-item">
                <div class="product-info-label">عنوان کالا</div>
                <div class="product-info-value product-title-value">نمونه محصول</div>
              </div>
              <div class="product-info-item product-image-item">
                <img src="/img/placeholder-product.png" alt="Product" class="product-info-image" width="48" height="88">
              </div>
              
              <!-- Row 2: Code and Reference Price -->
              <div class="product-info-item">
                <div class="product-info-label">کد کالا (STA)</div>
                <div class="product-info-value">STA-12345</div>
              </div>
              <div class="product-info-item">
                <div class="product-info-label">قیمت مرجع (ریال)</div>
                <div class="product-info-value">۱۵,۲۴۶,۰۰۰</div>
              </div>
              
              <!-- Row 3: Commission -->
              <div class="product-info-item">
                <div class="product-info-label">کمیسیون</div>
                <div class="product-info-value">۹%</div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Modal Footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">بازگشت</button>
          <button type="button" class="btn btn-brand modal-sell-btn" id="btn-sell-this">فروش همین کالا</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Became Seller -->
  <div class="modal fade" id="modal-became-seller" tabindex="-1" aria-labelledby="modal-became-seller-label" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
          <h5 class="modal-title" id="modal-became-seller-label">فروشنده شدید !</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="بستن"></button>
        </div>
        
        <!-- Modal Body -->
        <div class="modal-body">
          <p class="modal-subtext">شما فروشنده این کالا با کد کالایی STA-12345 شدید، برای فروش کالا، تنوع آن را ثبت کنید.</p>
          
          <!-- Product Confirmation Surface -->
          <div class="product-confirmation-surface">
            <p class="product-confirmation-text">لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم...</p>
            <div class="product-confirmation-details">
              <span class="product-confirmation-code">STA-12345</span>
              <img src="/img/placeholder-product.png" alt="Product" class="product-confirmation-image">
            </div>
          </div>
        </div>
        
        <!-- Modal Footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">بازگشت</button>
          <button type="button" class="btn btn-brand modal-register-variant-btn">ثبت تنوع کالا</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Add Variant -->
  <div class="modal fade" id="modal-add-variant" tabindex="-1" aria-labelledby="modal-add-variant-label" aria-hidden="true">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
          <h5 class="modal-title" id="modal-add-variant-label">افزودن تنوع کالا</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="بستن"></button>
        </div>
        
        <!-- Modal Body -->
        <div class="modal-body">
          <p class="modal-subtext">برای فروش کالا، تنوع آن را ثبت کنید.</p>
          
          <!-- Product Info Surface -->
          <div class="product-confirmation-surface">
            <p class="product-confirmation-text">لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم ...</p>
            <div class="product-confirmation-details">
              <span class="product-confirmation-code">STA-12345</span>
              <img src="/img/placeholder-product.png" alt="Product" class="product-confirmation-image">
            </div>
          </div>
          
          <!-- Divider -->
          <div class="modal-divider"></div>
          
          <!-- Variant Form -->
          <form class="variant-form" id="variantForm">
            <div class="variant-form-grid">
              <!-- Brand Selection -->
              <div class="form-group">
                <label for="brandSelect" class="form-label required">انتخاب برند *</label>
                <select class="form-select" id="brandSelect" required>
                  <option value="" disabled selected>انتخاب</option>
                  <option value="sample1">نمونه ۱</option>
                  <option value="sample2">نمونه ۲</option>
                </select>
              </div>
              
              <!-- Size/Volume Selection -->
              <div class="form-group">
                <label for="sizeSelect" class="form-label required">انتخاب سایز یا حجم *</label>
                <select class="form-select" id="sizeSelect" required>
                  <option value="" disabled selected>انتخاب</option>
                  <option value="30ml">۳۰ml</option>
                  <option value="50ml">۵۰ml</option>
                  <option value="100ml">۱۰۰ml</option>
                </select>
              </div>
              
              <!-- Delivery Time -->
              <div class="form-group">
                <label for="deliveryTime" class="form-label required">بازه زمان ارسال (روز) *</label>
                <input type="number" class="form-control" id="deliveryTime" placeholder="۲" required>
              </div>
              
              <!-- Max Order Per Cart -->
              <div class="form-group">
                <label for="maxOrder" class="form-label">حداکثر سفارش در سبد (عدد)</label>
                <input type="number" class="form-control" id="maxOrder" placeholder="۱۰">
              </div>
              
              <!-- Stock Quantity -->
              <div class="form-group">
                <label for="stockQuantity" class="form-label">موجودی نزد شما (عدد)</label>
                <input type="number" class="form-control" id="stockQuantity" placeholder="۲۰">
              </div>
              
              <!-- Sale Price -->
              <div class="form-group">
                <label for="salePrice" class="form-label required">قیمت فروش (ریال) *</label>
                <input type="text" class="form-control" id="salePrice" placeholder="۱۵,۳۵۰,۰۰۰" required>
              </div>
            </div>
          </form>
        </div>
        
        <!-- Modal Footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" id="addNewVariantBtn">
            <i class="bi bi-plus-lg me-1"></i>
            افزودن تنوع جدید
          </button>
          <button type="button" class="btn btn-brand modal-add-to-list-btn">افزودن به لیست تنوع</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap 5 JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- JavaScript -->
  <script>
    // Mobile menu toggle
    document.getElementById('mobileMenuBtn').addEventListener('click', function() {
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('mobile-open');
    });
    
    // Close sidebar when clicking outside on mobile
    document.addEventListener('click', function(event) {
      const sidebar = document.getElementById('sidebar');
      const mobileMenuBtn = document.getElementById('mobileMenuBtn');
      
      if (window.innerWidth <= 768 && 
          !sidebar.contains(event.target) && 
          !mobileMenuBtn.contains(event.target)) {
        sidebar.classList.remove('mobile-open');
      }
    });
    
    // Menu item click handlers
    document.querySelectorAll('.menu-item').forEach(item => {
      item.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Remove active class from all items
        document.querySelectorAll('.menu-item').forEach(menuItem => {
          menuItem.classList.remove('active');
        });
        
        // Add active class to clicked item
        this.classList.add('active');
        
        // Close mobile menu if open
        if (window.innerWidth <= 768) {
          document.getElementById('sidebar').classList.remove('mobile-open');
        }
      });
    });
    
    // Theme toggle functionality
    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-bs-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      
      html.setAttribute('data-bs-theme', newTheme);
      localStorage.setItem('theme', newTheme);
    }

    // Initialize theme on page load
    document.addEventListener('DOMContentLoaded', () => {
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-bs-theme', savedTheme);
    });
    
    // Handle window resize
    window.addEventListener('resize', function() {
      const sidebar = document.getElementById('sidebar');
      if (window.innerWidth > 768) {
        sidebar.classList.remove('mobile-open');
      }
    
    });


    function hidden1() {
      document.querySelector('.results-list-container').style.display = 'block';
      document.querySelector('#card1').style.display = 'block';
      document.querySelector('.search-card-surface').style.display = 'none';
    }
    
    // ========== SEARCH CARD FUNCTIONALITY ==========
    
    // Search input and autocomplete functionality
    const searchInput = document.getElementById('productSearch');
    const autocompleteDropdown = document.getElementById('searchSuggestions');
    const notFoundBtn = document.getElementById('notFoundBtn');
    const viewProductListBtn = document.getElementById('viewProductListBtn');
    const searchCard = document.querySelector('.search-card-surface');
    const resultsContainer = document.querySelector('.results-list-container');
    
    // Function to hide all results elements
    function hideAllResults() {
      document.querySelector('.page-header').style.display = 'none';
      document.querySelector('.results-toolbar').style.display = 'none';
      document.querySelector('.results-header').style.display = 'none';
      document.querySelectorAll('.result-row').forEach(row => {
        row.style.display = 'none';
      });
      resultsContainer.style.display = 'none';
    }
    
    // Function to show all results elements
    function showAllResults() {
      document.querySelector('.page-header').style.display = 'block';
      document.querySelector('.results-toolbar').style.display = 'block';
      document.querySelector('.results-header').style.display = 'grid';
      document.querySelectorAll('.result-row').forEach(row => {
        row.style.display = 'grid';
      });
      resultsContainer.style.display = 'flex';
    }
    
    // Show autocomplete when input is focused
    searchInput.addEventListener('focus', function() {
      autocompleteDropdown.classList.add('show');
    });
    
    // Hide autocomplete when clicking outside
    document.addEventListener('click', function(event) {
      if (!searchInput.contains(event.target) && !autocompleteDropdown.contains(event.target)) {
        autocompleteDropdown.classList.remove('show');
      }
    });
    
    // Handle search input typing
    searchInput.addEventListener('input', function() {
      const value = this.value.trim();
      if (value.length > 0) {
        autocompleteDropdown.classList.add('show');
        // Show results when user types
        showResults();
      } else {
        autocompleteDropdown.classList.remove('show');
        // Hide results when input is empty
        hideResults();
      }
    });
    
    // Handle autocomplete item selection
    document.querySelectorAll('.autocomplete-item').forEach(item => {
      item.addEventListener('click', function() {
        const primaryText = this.querySelector('.autocomplete-primary').textContent;
        const secondaryText = this.querySelector('.autocomplete-secondary').textContent;
        searchInput.value = primaryText;
        autocompleteDropdown.classList.remove('show');
        
        // Create product data from selection
        const productData = {
          title: primaryText,
          code: 'STA-' + Math.floor(Math.random() * 10000), // Generate random code
          refPrice: '۱۵,۳۵۰,۰۰۰',
          commission: '۸%',
          brand: 'برند نمونه',
          image: '/img/placeholder-product.png'
        };
        
        // Open verify modal with product data
        handleModalFlow('search_select', productData);
        
        console.log('Selected item:', primaryText, 'Opening verify modal');
      });
    });
    
    // Handle view product list button click
    viewProductListBtn.addEventListener('click', function() {
      // Hide search card

      searchCard.style.display = 'none';
      
      // Show results container
      resultsContainer.style.display = 'block';
      
      // Show toolbar and table
      document.querySelector('.results-toolbar').style.display = 'flex';
      document.querySelector('.results-header').style.display = 'grid';
      document.querySelectorAll('.result-row').forEach(row => {
        row.style.display = 'grid';
      });
      
      // Show page header
      document.querySelector('.page-header').style.display = 'block';
    });
    
    // Handle "Not Found" button click
    notFoundBtn.addEventListener('click', function() {
      console.log('Product not found - opening add variant modal');
      
      // Create default product data for new product
      const productData = {
        title: searchInput.value || 'کالای جدید',
        code: 'STA-NEW-' + Math.floor(Math.random() * 1000),
        refPrice: 'قیمت مرجع تعیین نشده',
        commission: 'تعیین نشده',
        brand: 'برند جدید',
        image: '/img/placeholder-product.png'
      };
      
      // Open add variant modal directly
      handleModalFlow('not_found', productData);
    });
    
    // Handle search form submission
    searchInput.addEventListener('keypress', function(event) {
      if (event.key === 'Enter') {
        event.preventDefault();
        const searchTerm = this.value.trim();
        if (searchTerm) {
          console.log('Searching for:', searchTerm);
          
          // Create product data from search term
          const productData = {
            title: searchTerm,
            code: 'STA-SEARCH-' + Math.floor(Math.random() * 1000),
            refPrice: '۱۵,۳۵۰,۰۰۰',
            commission: '۸%',
            brand: 'برند نمونه',
            image: '/img/placeholder-product.png'
          };
          
          // Open verify modal with search results
          handleModalFlow('search_select', productData);
          autocompleteDropdown.classList.remove('show');
        }
      }
    });
    
    // Handle action buttons
    document.querySelector('.search-card-link').addEventListener('click', function(event) {
      event.preventDefault();
      console.log('Back button clicked');
      // Here you would typically navigate back
    });
    
    document.querySelector('.search-card-action-btn').addEventListener('click', function() {
      console.log('View product list clicked');
      // Here you would typically navigate to product list
    });
    
    // ========== RESULTS LIST FUNCTIONALITY ==========
    
    // Filter chips functionality
    document.querySelectorAll('.filter-chip').forEach(chip => {
      chip.addEventListener('click', function() {
        // Toggle active state
        this.classList.toggle('active');
        
        // Here you would typically show a dropdown or modal for filter options
        console.log('Filter clicked:', this.querySelector('.chip-label').textContent);
      });
    });
    
    // Add product button functionality
    document.querySelector('.add-product-btn').addEventListener('click', function() {
      console.log('Add new product clicked');
      // Here you would typically navigate to add product page or show modal
    });
    
    // Result row interactions
    document.querySelectorAll('.result-row').forEach(row => {
      // Row click handler
      row.addEventListener('click', function(event) {
        // Don't trigger if clicking on action button
        if (!event.target.closest('.result-actions')) {
          console.log('Result row clicked');
          
          // Extract product data from the row
          const productData = {
            title: this.querySelector('.product-title').textContent,
            code: this.querySelector('.product-code').textContent,
            refPrice: this.querySelector('.min-price-col').textContent,
            commission: this.querySelector('.commission-col').textContent,
            brand: 'برند نمونه', // This would come from actual data
            image: this.querySelector('.product-thumb img').src
          };
          
          // Show the verify modal
          showVerifyModal(productData);
        }
      });
      
    });
    
    // Status badge interactions (if needed)
    document.querySelectorAll('.status-badge').forEach(badge => {
      badge.addEventListener('click', function(event) {
        event.stopPropagation();
        console.log('Status badge clicked:', this.textContent);
        // Here you could show status details or change status
      });
    });
    
    // Product title click handler
    document.querySelectorAll('.product-title').forEach(title => {
      title.addEventListener('click', function(event) {
        event.stopPropagation();
        console.log('Product title clicked:', this.textContent);
        // Here you would typically navigate to product details
      });
    });
    
    // Product code click handler
    document.querySelectorAll('.product-code').forEach(code => {
      code.addEventListener('click', function(event) {
        event.stopPropagation();
        console.log('Product code clicked:', this.textContent);
        // Here you could copy code to clipboard or show code details
      });
    });
    
    // Product thumb click handler
    document.querySelectorAll('.product-thumb img').forEach(thumb => {
      thumb.addEventListener('click', function(event) {
        event.stopPropagation();
        console.log('Product image clicked');
        // Here you would typically show image modal or gallery
      });
    });
    
    // ========== MODAL FUNCTIONALITY ==========
    
    // Get modal instances
    const verifyModal = new bootstrap.Modal(document.getElementById('modal-verify-same-product'));
    const becameSellerModal = new bootstrap.Modal(document.getElementById('modal-became-seller'));
    const addVariantModal = new bootstrap.Modal(document.getElementById('modal-add-variant'));
    
    // Function to show modal with product data
    function showVerifyModal(productData) {
      // Update modal content with product data
      if (productData) {
        document.querySelector('.product-title-value').textContent = productData.title || 'لورم ایپسوم متن ساختگی...';
        document.querySelector('.product-info-item:nth-child(3) .product-info-value').textContent = productData.code || 'STA-12345';
        document.querySelector('.product-info-item:nth-child(4) .product-info-value').textContent = productData.refPrice || '۱۵,۲۴۶,۰۰۰';
        document.querySelector('.product-info-item:nth-child(5) .product-info-value').textContent = productData.commission || '۹%';
        document.querySelector('.product-info-item:nth-child(6) .product-info-value').textContent = productData.brand || 'نمونه';
        
        if (productData.image) {
          document.querySelector('.product-info-image').src = productData.image;
        }
      }
      
      // Show modal
      verifyModal.show();
    }
    
    // Function to show became seller modal with product data
    function showBecameSellerModal(productData) {
      // Update modal content with product data
      if (productData) {
        document.querySelector('.modal-subtext').textContent = `شما فروشنده این کالا با کد کالایی ${productData.code || 'STA-12345'} شدید، برای فروش کالا، تنوع آن را ثبت کنید.`;
        document.querySelector('.product-confirmation-text').textContent = productData.title || 'لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم...';
        document.querySelector('.product-confirmation-code').textContent = productData.code || 'STA-12345';
        
        if (productData.image) {
          document.querySelector('.product-confirmation-image').src = productData.image;
        }
      }
      
      // Show modal
      becameSellerModal.show();
    }
    
    // Modal button handlers - Verify Modal Primary Button
    document.querySelector('#btn-sell-this').addEventListener('click', function() {
      console.log('Verify modal primary button clicked - opening became seller modal');
      
      // Extract product data from the verify modal
      const productData = {
        title: document.querySelector('.product-title-value').textContent,
        code: document.querySelector('.product-info-item:nth-child(3) .product-info-value').textContent,
        refPrice: document.querySelector('.product-info-item:nth-child(4) .product-info-value').textContent,
        commission: document.querySelector('.product-info-item:nth-child(5) .product-info-value').textContent,
        image: document.querySelector('.product-info-image').src
      };
      
      // Use flow management
      handleModalFlow('verify_primary', productData);
    });
    
    // Modal close handlers
    document.querySelector('#modal-verify-same-product .btn-close').addEventListener('click', function() {
      console.log('Modal closed via close button');
    });
    
    document.querySelector('#modal-verify-same-product .btn-outline-secondary').addEventListener('click', function() {
      console.log('Modal closed via back button');
    });
    
    // Function to show add variant modal with product data
    function showAddVariantModal(productData) {
      // Update modal content with product data
      if (productData) {
        document.querySelector('#modal-add-variant .modal-subtext').textContent = `شما فروشنده این کالا با کد کالایی ${productData.code || 'STA-12345'} شدید، برای فروش کالا، تنوع آن را ثبت کنید.`;
        document.querySelector('#modal-add-variant .product-confirmation-text').textContent = productData.title || 'لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم ...';
        document.querySelector('#modal-add-variant .product-confirmation-code').textContent = productData.code || 'STA-12345';
        
        if (productData.image) {
          document.querySelector('#modal-add-variant .product-confirmation-image').src = productData.image;
        }
      }
      
      // Reset form
      document.getElementById('variantForm').reset();
      
      // Show modal
      addVariantModal.show();
    }
    
    // Second modal button handlers - Became Seller Modal Primary Button
    document.querySelector('.modal-register-variant-btn').addEventListener('click', function() {
      console.log('Became seller modal primary button clicked - opening add variant modal');
      
      // Extract product data from the became seller modal
      const productData = {
        title: document.querySelector('#modal-became-seller .product-confirmation-text').textContent,
        code: document.querySelector('#modal-became-seller .product-confirmation-code').textContent,
        image: document.querySelector('#modal-became-seller .product-confirmation-image').src
      };
      
      // Use flow management
      handleModalFlow('became_seller_primary', productData);
    });
    
    // Second modal close handlers
    document.querySelector('#modal-became-seller .btn-close').addEventListener('click', function() {
      console.log('Became seller modal closed via close button');
    });
    
    document.querySelector('#modal-became-seller .btn-outline-secondary').addEventListener('click', function() {
      console.log('Became seller modal closed via back button');
    });
    
    // Third modal button handlers
    document.querySelector('.modal-add-to-list-btn').addEventListener('click', function() {
      console.log('Add to variant list clicked');
      
      // Validate form
      const form = document.getElementById('variantForm');
      if (form.checkValidity()) {
        // Collect form data
        const formData = {
          brand: document.getElementById('brandSelect').value,
          size: document.getElementById('sizeSelect').value,
          deliveryTime: document.getElementById('deliveryTime').value,
          maxOrder: document.getElementById('maxOrder').value,
          stockQuantity: document.getElementById('stockQuantity').value,
          salePrice: document.getElementById('salePrice').value
        };
        
        console.log('Variant data:', formData);
        
        // Here you would typically save the variant data
        addVariantModal.hide();
        
        // Show success message
        alert('تنوع کالا با موفقیت به لیست اضافه شد');
      } else {
        // Show validation errors
        form.reportValidity();
      }
    });
    
    document.getElementById('addNewVariantBtn').addEventListener('click', function() {
      console.log('Add new variant clicked');
      
      // Validate current form first
      const form = document.getElementById('variantForm');
      if (form.checkValidity()) {
        // Collect current form data
        const formData = {
          brand: document.getElementById('brandSelect').value,
          size: document.getElementById('sizeSelect').value,
          deliveryTime: document.getElementById('deliveryTime').value,
          maxOrder: document.getElementById('maxOrder').value,
          stockQuantity: document.getElementById('stockQuantity').value,
          salePrice: document.getElementById('salePrice').value
        };
        
        console.log('Current variant data:', formData);
        
        // Reset form for new variant
        form.reset();
        
        // Show success message
        alert('تنوع قبلی ذخیره شد. فرم برای تنوع جدید بازنشانی شد');
      } else {
        // Show validation errors
        form.reportValidity();
      }
    });
    
    // Third modal close handlers
    document.querySelector('#modal-add-variant .btn-close').addEventListener('click', function() {
      console.log('Add variant modal closed via close button');
    });
    
    // Form validation and formatting
    document.getElementById('salePrice').addEventListener('input', function(e) {
      // Format price with commas
      let value = e.target.value.replace(/,/g, '');
      if (value && !isNaN(value)) {
        e.target.value = parseInt(value).toLocaleString('fa-IR');
      }
    });
    
    // Form submission prevention
    document.getElementById('variantForm').addEventListener('submit', function(e) {
      e.preventDefault();
      console.log('Form submission prevented - using button handlers instead');
    });
    
    // Modal events
    document.getElementById('modal-verify-same-product').addEventListener('hidden.bs.modal', function() {
      console.log('Modal hidden');
      // Reset modal content if needed
    });
    
    document.getElementById('modal-verify-same-product').addEventListener('shown.bs.modal', function() {
      console.log('Modal shown');
      // Focus management or other setup
    });
    
    // Second modal events
    document.getElementById('modal-became-seller').addEventListener('hidden.bs.modal', function() {
      console.log('Became seller modal hidden');
      // Reset modal content if needed
    });
    
    document.getElementById('modal-became-seller').addEventListener('shown.bs.modal', function() {
      console.log('Became seller modal shown');
      // Focus management or other setup
    });
    
    // Third modal events
    document.getElementById('modal-add-variant').addEventListener('hidden.bs.modal', function() {
      console.log('Add variant modal hidden');
      // Reset form if needed
      document.getElementById('variantForm').reset();
    });
    
    document.getElementById('modal-add-variant').addEventListener('shown.bs.modal', function() {
      console.log('Add variant modal shown');
      // Focus on first input
      document.getElementById('brandSelect').focus();
    });
    
    // ========== RESULTS VISIBILITY MANAGEMENT ==========
    
    // Function to show results section
    function showResults() {
      showAllResults();
    }
    
    // Function to hide results section
    function hideResults() {
      hideAllResults();
    }
    
    // ========== MODAL FLOW MANAGEMENT ==========
    
    // Function to handle complete modal flow
    function handleModalFlow(action, productData) {
      console.log('Modal flow action:', action, 'with data:', productData);
      
      switch(action) {
        case 'search_select':
          showVerifyModal(productData);
          break;
        case 'verify_primary':
          verifyModal.hide();
          setTimeout(() => showBecameSellerModal(productData), 300);
          break;
        case 'became_seller_primary':
          becameSellerModal.hide();
          setTimeout(() => showAddVariantModal(productData), 300);
          break;
        case 'not_found':
          showAddVariantModal(productData);
          break;
        default:
          console.log('Unknown modal flow action:', action);
      }
    }
    
    // Enhanced event handlers with better logging
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Modal flow system initialized');
      console.log('Available actions:');
      console.log('- Search input selection → Verify modal');
      console.log('- Verify modal primary → Became seller modal');
      console.log('- Became seller modal primary → Add variant modal');
      console.log('- Not found button → Add variant modal');
    });
    
    // Example: Show modal when clicking on a result row (for demonstration)
    // You can call showVerifyModal() from other parts of your application
    // showVerifyModal({
    //   title: 'لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم',
    //   code: 'STA-4586',
    //   refPrice: '۱۵,۳۵۰,۰۰۰',
    //   commission: '۸%',
    //   brand: 'برند نمونه',
    //   image: '/img/placeholder-product.png'
    // });
  </script>
</body>
</html>
